# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é Swagger UI

## –î–æ—Å—Ç—É–ø –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### üîó –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Å—ã–ª–∫–∏
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc  
- **OpenAPI JSON**: http://localhost:8000/api/v1/openapi.json

### üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ó–∞–ø—É—â–µ–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç (`docker compose up -d`)
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–∞ 8000

## –û–±–∑–æ—Ä API

### üè∑Ô∏è –ì—Ä—É–ø–ø—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

#### **General** - –û–±—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `GET /` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–∏—Å–µ
- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `GET /config` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### **Tokens** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏
- `POST /api/v1/tokens/` - –°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω
- `GET /api/v1/tokens/` - –°–ø–∏—Å–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤
- `GET /api/v1/tokens/{token_id}` - –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω
- `PUT /api/v1/tokens/{token_id}` - –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω
- `DELETE /api/v1/tokens/{token_id}` - –£–¥–∞–ª–∏—Ç—å —Ç–æ–∫–µ–Ω
- `POST /api/v1/tokens/{token_id}/refresh` - –û–±–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ refresh token
- `GET /api/v1/tokens/user/{user_id}` - –¢–æ–∫–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### **Orders** - –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –∑–∞–∫–∞–∑–∞–º–∏
- `GET /api/v1/orders/` - –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤
- `GET /api/v1/orders/{order_id}` - –ü–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑
- `GET /api/v1/orders/allegro/{allegro_order_id}` - –ó–∞–∫–∞–∑ –ø–æ Allegro ID
- `DELETE /api/v1/orders/{order_id}` - –£–¥–∞–ª–∏—Ç—å –∑–∞–∫–∞–∑
- `GET /api/v1/orders/user/{user_id}` - –ó–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /api/v1/orders/stats/summary` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–∫–∞–∑–æ–≤
- `GET /api/v1/orders/events/` - –°–æ–±—ã—Ç–∏—è –∑–∞–∫–∞–∑–æ–≤
- `GET /api/v1/orders/{order_id}/events` - –°–æ–±—ã—Ç–∏—è –∑–∞–∫–∞–∑–∞

#### **Sync** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- `POST /api/v1/sync/start` - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- `POST /api/v1/sync/start/user/{user_id}` - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/v1/sync/start/token/{token_id}` - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞
- `GET /api/v1/sync/history` - –ò—Å—Ç–æ—Ä–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π
- `GET /api/v1/sync/status/{sync_id}` - –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- `POST /api/v1/sync/cancel/{sync_id}` - –û—Ç–º–µ–Ω–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- `GET /api/v1/sync/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π
- `GET /api/v1/sync/running` - –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- `GET /api/v1/sync/task/{task_id}` - –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ Celery

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

### üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Swagger UI**: http://localhost:8000/docs
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ health check**:
   - –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ —Å–µ–∫—Ü–∏—é "general"
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ `GET /health`
   - –ù–∞–∂–º–∏—Ç–µ "Try it out" ‚Üí "Execute"
   - –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è —Å—Ç–∞—Ç—É—Å `healthy`

### üìù –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
# –ß–µ—Ä–µ–∑ curl
curl -X GET "http://localhost:8000/config" | jq

# –ß–µ—Ä–µ–∑ Swagger UI
# 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ GET /config
# 2. –ù–∞–∂–º–∏—Ç–µ "Try it out"
# 3. –ù–∞–∂–º–∏—Ç–µ "Execute"
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤
```bash
# –ß–µ—Ä–µ–∑ curl
curl -X GET "http://localhost:8000/api/v1/tokens/" | jq

# –ß–µ—Ä–µ–∑ Swagger UI
# 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ GET /api/v1/tokens/
# 2. –ù–∞–∂–º–∏—Ç–µ "Try it out"
# 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# 4. –ù–∞–∂–º–∏—Ç–µ "Execute"
```

### üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

#### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è
–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç:
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)
- `per_page` - —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (1-100)
- `user_id` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- `date_from` / `date_to` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–∞–º

#### –§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö
- **DateTime**: `2024-01-15T10:30:00`
- **UUID**: `550e8400-e29b-41d4-a716-446655440000`
- **JSON**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### üìä –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

#### TokenCreate
```json
{
  "user_id": "user123",
  "allegro_token": "Bearer token...",
  "refresh_token": "refresh_token...",
  "expires_at": "2024-01-15T10:30:00"
}
```

#### SyncTrigger
```json
{
  "user_id": "user123",
  "token_id": "550e8400-e29b-41d4-a716-446655440000",
  "sync_from_date": "2024-01-01T00:00:00",
  "sync_to_date": "2024-01-15T23:59:59",
  "force_full_sync": false
}
```

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã
- Swagger UI –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è
- –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

### ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç HTTP 501 "–ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ"
- –≠—Ç–æ –∑–∞–≥–æ—Ç–æ–≤–∫–∏ –¥–ª—è –±—É–¥—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è API —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–∑—É—á–∏—Ç–µ API —Å—Ç—Ä—É–∫—Ç—É—Ä—É** —á–µ—Ä–µ–∑ Swagger UI
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –±–∞–∑–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã** (health, config)
3. **–û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –º–æ–¥–µ–ª—è–º–∏ –¥–∞–Ω–Ω—ã—Ö**
4. **–ù–∞—á–Ω–∏—Ç–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é** –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

---

**–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 2024-01-15  
**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é 